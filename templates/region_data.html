<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Area and Yield by Region</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>Area and Yield by Region</h1>
    <form id="regionForm">
        <label for="crop">Crop Type:</label>
        <select id="crop" name="crop">
            <option value="Aus Rice">Aus Rice</option>
            <option value="Aman Rice">Aman Rice</option>
            <option value="Boro Rice">Boro Rice</option>
            <option value="Wheat">Wheat</option>
        </select>
        <label for="district">District:</label>
        <input type="text" id="district" name="district">
        <button type="submit">Search</button>
    </form>
    <table id="regionTable">
        <thead>
            <tr><th>District/Division</th><th>Area (Acres 2023-24)</th><th>Yield (Maund/Acre 2023-24)</th><th>Production (MT 2023-24)</th><th>Variety</th></tr>
        </thead>
        <tbody></tbody>
    </table>
    <script>
        document.getElementById('regionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            fetch('/get_region_data', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                const tbody = document.querySelector('#regionTable tbody');
                tbody.innerHTML = '';
                data.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `<td>${row.District_Division}</td><td>${row['2023-24_Area_Acres']}</td><td>${row['2023-24_Yield_Acre_Maund']}</td><td>${row['2023-24_Production_MT']}</td><td>${row.variety || 'N/A'}</td>`;
                    tbody.appendChild(tr);
                });
            });
        });
    </script>
    <a href="/">Back to Home</a>
</body>
</html>
