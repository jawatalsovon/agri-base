{% extends 'base.html' %}

{% block title %}Yield Summary Report{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3>Yield Summary Report</h3>
    </div>
    <div class="card-body">
        <hr>
        <h4 class="mt-4">Detailed Data</h4>
        <div class="table-responsive">
            <table class="table table-striped table-bordered datatable" style="width:100%">
                <thead>
                    <tr>
                        {% for header in table_headers %}
                            <th>{{ header.replace('_', ' ') }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in summary_data %}
                    <tr>
                        {% for cell in row %}
                            <td>{{ cell }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const ctx = document.getElementById('yieldChart').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: {{ labels|tojson }},
            datasets: [{
                label: 'Production 2023-24 (\'000 MT)',
                data: {{ chart_data|tojson }},
                backgroundColor: 'rgba(2, 119, 189, 0.6)',
                borderColor: 'rgba(1, 87, 155, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Production (\'000 MT)'
                    }
                }
            }
        }
    });
</script>
{% endblock %}
